/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package youtubedownloader;

import java.util.Scanner;

import youtubedownloader.model.VideoManager;
import youtubedownloader.model.domain.YoutubePlaylist;
import youtubedownloader.model.exceptions.YoutubeAPIException;

public class App {
    static final String API_KEY = "AIzaSyCLtNPNHaj9Wot6U1rmGYW0zuUbMRb9C7s";
    static final String YOUTUBE_LINK_EXAMPLE = "https://www.youtube.com/watch?v=df_9Q30mNRw";
    static final String PLAYLIST_LINK_EXAMPLE = "https://www.youtube.com/watch?v=3sO-Y1Zbft4&list=PL-gjJw1sh-N8CiJEZkK6I-gwgxNYDzTAb";

    public static void main(String[] args) {
        Scanner in = new Scanner(System.in);
        try {
            VideoManager videoManager = new VideoManager(API_KEY);
            YoutubePlaylist playlist = videoManager.getPlaylist(PLAYLIST_LINK_EXAMPLE);
            String command = "";
            do {
                System.out.print("Command:");
                command = in.nextLine().trim();

                switch (command) {
                    case "next" -> System.out.println(playlist.getNext().getTitle());
                    case "current" -> System.out.println(playlist.getCurrent().getTitle());
                    case "prev" -> System.out.println(playlist.getPrevious().getTitle());
                    case "exit" -> System.out.println("Bye");
                }
            } while (!command.equals("exit"));
        } catch (YoutubeAPIException e) {
            System.err.println("Failed to get playlist: " + e.getMessage());
        }
        in.close();
    }
}
